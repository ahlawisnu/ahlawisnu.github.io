<!DOCTYPE html>
<html lang="id">
<head>
  
  <link rel="stylesheet" href="style.css">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Editor Undangan Karang Taruna</title>
  <style>
    :root{
      --primary:#2962ff;   /* Biru */
      --secondary:#ff6d00; /* Oranye */
      --accent:#00c853;    /* Hijau */
      --bg:#f6f9fc;
      --text:#243043;
      --muted:#5a6b87;
      --card:#ffffff;
      --radius:16px;
      --shadow:0 10px 30px rgba(16,24,40,0.12);
    }
    *{box-sizing:border-box}
    html,body{margin:0}
    body{
      font-family: ui-sans-serif, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 600px at 10% -10%, #e6f0ff 0%, transparent 60%),
                  radial-gradient(900px 600px at 110% 10%, #fff0e6 0%, transparent 60%),
                  var(--bg);
      padding: 24px;
    }
    .app-title{
      display:flex; align-items:center; gap:12px; margin: 4px 0 20px;
    }
    .logo{
      width:40px;height:40px;border-radius:12px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      box-shadow: 0 6px 16px rgba(41,98,255,0.35);
    }
    .app-title h1{font-size:22px; margin:0;}
    .wrap{
      display:grid; gap:20px;
      grid-template-columns: 1fr;
      max-width: 1100px; margin: 0 auto;
    }
    @media(min-width: 980px){
      .wrap{grid-template-columns: 420px 1fr;}
    }
    .card{
      background:var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .panel{padding:22px 22px 6px;}
    .panel h2{
      margin:0 0 14px; font-size:18px; color:var(--muted); letter-spacing:.3px;
    }
    .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .field{margin-bottom:14px}
    .field label{
      display:block; font-size:12px; color:var(--muted); margin:0 0 6px;
      letter-spacing:.2px;
    }
    input[type="text"], textarea, select{
      width:100%;
      border:1px solid #d7deea;
      border-radius:12px;
      padding:12px 14px;
      font:inherit;
      color:var(--text);
      background:#fff;
      outline:none;
      transition: box-shadow .2s, border-color .2s, transform .05s;
    }
    textarea{min-height:96px; resize:vertical}
    input:focus, textarea:focus, select:focus{
      border-color: color-mix(in srgb, var(--primary) 60%, #8aa7ff);
      box-shadow: 0 0 0 4px color-mix(in srgb, var(--primary) 15%, transparent);
    }
    .btn{
      appearance:none; border:0; border-radius:12px; padding:10px 14px;
      background: linear-gradient(135deg, var(--primary), color-mix(in srgb, var(--primary) 70%, #8aa7ff));
      color:#fff; cursor:pointer; font-weight:600;
      box-shadow: 0 6px 16px rgba(41,98,255,.35);
      transition: transform .06s ease, filter .2s ease, box-shadow .2s ease;
    }
    .btn:hover{filter:brightness(1.05)}
    .btn:active{transform: translateY(1px)}
    .btn-ghost{
      background:#fff; color:var(--primary); border:1px solid rgba(41,98,255,.25);
      box-shadow:none;
    }
    .btn-danger{
      background: linear-gradient(135deg, #ff3d5b, #ff8a80);
      box-shadow: 0 6px 16px rgba(255,61,91,.35);
    }
    .btn-row{display:flex; gap:10px; flex-wrap:wrap; margin: 6px 0 16px;}
    .hint{font-size:12px; color:var(--muted); margin-top:8px}

    /* Agenda editor */
    .agenda-editor{display:flex; flex-direction:column; gap:8px; margin-bottom:6px}
    .agenda-item{
      display:flex; gap:8px; align-items:center;
    }
    .agenda-item input{flex:1}
    .chip{
      display:inline-block; padding:6px 10px; border-radius:999px; font-size:12px;
      background: color-mix(in srgb, var(--secondary) 16%, #fff);
      color: color-mix(in srgb, var(--secondary) 60%, #7a3300);
      border:1px dashed color-mix(in srgb, var(--secondary) 30%, #edc5a3);
      margin: 0 6px 0 0;
    }

    /* Invitation preview (Material look) */
    .invite{
      background:#fff; border-radius: 20px; overflow:hidden;
    }
    .invite__header{
      padding: 32px 26px;
      color:#fff;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      position:relative;
      isolation:isolate;
    }
    .invite__header::after{
      content:""; position:absolute; inset:auto -30px -60px auto; width:220px; height:220px;
      background: radial-gradient(closest-side, rgba(255,255,255,0.25), transparent 70%);
      filter: blur(2px); border-radius:50%; z-index:-1;
    }
    .invite__title{font-size:28px; margin:0 0 6px; letter-spacing:.3px;text-align: center;}
    .invite__subtitle{margin:0; opacity:.95;text-align: center;}
    .invite__body{padding: 22px 26px 26px}
    .section{margin: 14px 0 16px}
    .section h3{
      font-size:14px; margin:0 0 8px; color: var(--muted); letter-spacing:.3px;
      display:flex; align-items:center; gap:8px;
    }
    .cardlet{
      background: #f7fbff;
      border:1px solid #e3edff;
      padding: 14px; border-radius: 14px;
    }
    .cardlet--warm{
      background:#fff8f1; border-color:#ffe2c4;
    }
    .kv{display:grid; grid-template-columns: 120px 1fr; gap:8px; font-size:15px}
    .agenda-list{margin:6px 0 0; padding-left:18px}
    .footer-note{
      margin-top: 16px; padding: 12px 14px; border-left:4px solid var(--accent);
      background: color-mix(in srgb, var(--accent) 12%, #fff);
      border-radius: 10px;
    }
    .sign{
      text-align:right; margin-top: 26px;
    }
    .sign .name{margin-top:36px; font-style:italic; font-weight:600}

    /* Toolbar under preview */
    .toolbar{
      display:flex; justify-content:flex-end; gap:10px; padding: 12px 16px 16px;
      border-top:1px solid #eef2f7; background: #fff;
    }

    /* Small helper UI */
    .theme-row{display:flex; gap:10px; align-items:center; margin-bottom:10px}
    .swatch{
      width:28px;height:28px;border-radius:8px;border:2px solid #fff;box-shadow:0 2px 6px rgba(0,0,0,.15);
      cursor:pointer; position:relative; overflow:hidden;
    }
    .swatch::after{content:""; position:absolute; inset:0; background: linear-gradient(135deg,var(--a),var(--b))}
    .swatch[aria-pressed="true"]{outline: 3px solid color-mix(in srgb, var(--primary) 50%, #9bb6ff)}
  </style>
</head>
<body>
  <!-- Menu -->
  <a class="whatsapp-link" href="/">Home</a>
  
  <div class="app-title">
    <div class="logo" aria-hidden="true"></div>
    <h1>Editor Undangan Karang Taruna</h1>
  </div>

  <div class="wrap">
    <!-- ============ Editor Panel ============ -->
    <div class="card">
      <div class="panel">
        <h2>Isi data undangan</h2>

        <div class="field">
          <label for="judul">Judul</label>
          <input id="judul" type="text" placeholder="Undangan Karang Taruna" />
        </div>

        <div class="field">
          <label for="subjudul">Sub Judul</label>
          <input id="subjudul" type="text" placeholder="Slogan atau tema acara" />
        </div>

        <div class="field">
          <label for="sambutan">Sambutan / Pembuka</label>
          <textarea id="sambutan" placeholder="Tuliskan pembuka undangan..."></textarea>
        </div>

        <div class="grid-2">
          <div class="field">
            <label for="hariTanggal">Hari / Tanggal</label>
            <input id="hariTanggal" type="text" placeholder="Sabtu, Tgl Bulan Thn" />
          </div>
          <div class="field">
            <label for="waktu">Waktu</label>
            <input id="waktu" type="text" placeholder="1930 WIB â€“ selesai" />
          </div>
        </div>

        <div class="field">
          <label for="tempat">Tempat</label>
          <input id="tempat" type="text" placeholder="Rumah Pak RT" />
        </div>

        <div class="field">
          <label>Detail Acara / Agenda</label>
          <div class="agenda-editor" id="agendaEditor"></div>
          <div class="btn-row">
            <button class="btn btn-ghost" id="btnAddAgenda" type="button">+ Tambah Agenda</button>
            <span class="hint">Susun agenda sesuai kebutuhan. Klik Hapus untuk menghilangkan item.</span>
          </div>
        </div>

        <div class="field">
          <label for="penutup">Penutup / Anjuran untuk hadir</label>
          <textarea id="penutup" placeholder="Harapan kehadiran dan penutup undangan..."></textarea>
        </div>

        <div class="field">
          <label for="ketua">TTD Ketua</label>
          <input id="ketua" type="text" placeholder="Nama Ketua Karang Taruna" />
        </div>

        <div class="field">
          <label>Tema warna</label>
          <div class="theme-row">
            <button class="swatch" type="button" data-theme="biru"
              style="--a:#2962ff;--b:#ff6d00" aria-pressed="true" title="Biru â€“ Oranye"></button>
            <button class="swatch" type="button" data-theme="teal"
              style="--a:#00bfa6;--b:#ff4081" aria-pressed="false" title="Teal â€“ Magenta"></button>
            <button class="swatch" type="button" data-theme="ungu"
              style="--a:#7b5cff;--b:#aeea00" aria-pressed="false" title="Ungu â€“ Lime"></button>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn" id="btnDownload" type="button">ðŸ“¥ Unduh sebagai HTML</button>
          <button class="btn btn-ghost" id="btnReset" type="button">â†º Reset contoh</button>
        </div>
      </div>
    </div>

    <!-- ============ Live Preview ============ -->
    <div class="card invite" id="previewCard" aria-live="polite">
      <div class="invite__header"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/National_emblem_of_Indonesia_Garuda_Pancasila.svg/330px-National_emblem_of_Indonesia_Garuda_Pancasila.svg.png" style="height:60px; margin:0 auto; display:block;">
        <h1 class="invite__title" id="pJudul">Undangan Karang Taruna</h1>
        <p class="invite__subtitle" id="pSubjudul">Bersama Membangun Desa</p>
      </div>
      <div class="invite__body">
        <div class="section">
          
          <div class="cardlet" id="pSambutan">
            Dengan hormat, sehubungan dengan akan diselenggarakannya kegiatan Karang Taruna, kami mengundang seluruh anggota untuk hadir.
          </div>
        </div>

        <div class="section">
          <h3>ðŸ—“ Waktu & Tempat</h3>
          <div class="cardlet cardlet--warm">
            <div class="kv">
              <div><span class="chip">Hari/Tanggal</span></div>
              <div id="pHariTanggal">Sabtu, Tgl Bulan Thn</div>
              <div><span class="chip">Waktu</span></div>
              <div id="pWaktu"> WIB â€“ selesai</div>
              <div><span class="chip">Tempat</span></div>
              <div id="pTempat">cth: Pak RT</div>
            </div>
          </div>
        </div>

        <div class="section">
          <h3>ðŸ“‹ Agenda Acara</h3>
          <ul class="agenda-list" id="pAgenda"></ul>
        </div>

        <div class="section">
          
          <div class="footer-note" id="pPenutup">
            Demikian undangan ini kami sampaikan. Besar harapan kami atas kehadira.
          </div>
        </div>

        <div class="sign">
          <div>Hormat kami,</div>
          <div>Ketua Karang Taruna</div>
          <div class="name" id="pKetua">Edit Sini</div>
        </div>
      </div>

      <div class="toolbar">
        <button class="btn" id="btnDownload2" type="button">ðŸ“¥ Unduh sebagai HTML</button>
      </div>
    </div>
  </div>

  <script>
    // ---------- State ----------
    const state = {
      judul: "Undangan Karang Taruna",
      subjudul: "Bersama Membangun Desa",
      sambutan: "Dengan hormat, sehubungan dengan akan diselenggarakannya kegiatan Karang Taruna, kami mengundang seluruh anggota untuk hadir.",
      hariTanggal: "Sabtu, Tgl Bulan Thn",
      waktu: "19:30 WIB â€“ selesai",
      tempat: "Rumah Pak RT",
      agenda: ["Pembukaan","Sambutan Ketua Karang Taruna","Pemaparan Program Kerja","Diskusi & Tanya Jawab","Penutupan"],
      penutup: "Demikian undangan ini kami sampaikan. Besar harapan kami atas kehadiran seluruh anggota Karang Taruna demi kemajuan bersama.",
      ketua: "Edit Sini",
      theme: "biru"
    };

    // ---------- Helpers ----------
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));
    const esc = s => String(s).replace(/[&<>\"']/g, ch => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[ch]));
    const nl2br = s => esc(s).replace(/\n/g,"<br>");

    function applyTheme(name){
      const map = {
        biru:     {primary:"#2962ff", secondary:"#ff6d00", accent:"#00c853", bg:"#f6f9fc"},
        teal:     {primary:"#00bfa6", secondary:"#ff4081", accent:"#00e676", bg:"#f4fbfa"},
        ungu:     {primary:"#7b5cff", secondary:"#aeea00", accent:"#00c853", bg:"#f8f6ff"}
      };
      const t = map[name] || map.biru;
      Object.entries(t).forEach(([k,v])=>document.documentElement.style.setProperty(`--${k}`, v));
      state.theme = name;
      // toggle pressed
      $$(".swatch").forEach(b=>b.setAttribute("aria-pressed", String(b.dataset.theme===name)));
    }

    function bindField(id, key, cb){
      const el = $(id);
      el.addEventListener("input", e=>{
        state[key] = e.target.value;
        updatePreview();
        cb && cb();
      });
    }

    function renderAgendaEditor(){
      const holder = $("#agendaEditor");
      holder.innerHTML = "";
      state.agenda.forEach((val, idx)=>{
        const row = document.createElement("div");
        row.className = "agenda-item";
        row.innerHTML = `
          <input type="text" value="${esc(val)}" placeholder="Item agenda #${idx+1}" />
          <button class="btn btn-danger" type="button" title="Hapus">âœ•</button>
        `;
        const input = row.querySelector("input");
        const del = row.querySelector("button");
        input.addEventListener("input", e=>{
          state.agenda[idx] = e.target.value;
          updatePreview();
        });
        del.addEventListener("click", ()=>{
          state.agenda.splice(idx,1);
          renderAgendaEditor();
          updatePreview();
        });
        holder.appendChild(row);
      });
    }

    function updatePreview(){
      $("#pJudul").textContent = state.judul || "â€”";
      $("#pSubjudul").textContent = state.subjudul || "";
      $("#pSambutan").innerHTML = nl2br(state.sambutan || "");
      $("#pHariTanggal").textContent = state.hariTanggal || "â€”";
      $("#pWaktu").textContent = state.waktu || "â€”";
      $("#pTempat").textContent = state.tempat || "â€”";
      const ul = $("#pAgenda");
      ul.innerHTML = "";
      (state.agenda && state.agenda.length ? state.agenda : []).forEach(item=>{
        if(!item) return;
        const li = document.createElement("li");
        li.textContent = item;
        ul.appendChild(li);
      });
      $("#pPenutup").innerHTML = nl2br(state.penutup || "");
      $("#pKetua").textContent = state.ketua || "â€”";
    }

    function fillInputsFromState(){
      $("#judul").value = state.judul;
      $("#subjudul").value = state.subjudul;
      $("#sambutan").value = state.sambutan;
      $("#hariTanggal").value = state.hariTanggal;
      $("#waktu").value = state.waktu;
      $("#tempat").value = state.tempat;
      $("#penutup").value = state.penutup;
      $("#ketua").value = state.ketua;
      renderAgendaEditor();
    }

    function resetToDefaults(){
      Object.assign(state, {
        judul: "Undangan Karang Taruna",
        subjudul: "Bersama Membangun Desa",
        sambutan: "Dengan hormat, sehubungan dengan akan diselenggarakannya kegiatan Karang Taruna, kami mengundang seluruh anggota untuk hadir.",
        hariTanggal: "Sabtu, Tgl Bulan Thn",
        waktu: "19:30 WIB â€“ selesai",
        tempat: "Rumah Pak RT",
        agenda: ["Pembukaan","Sambutan Ketua Karang Taruna","Pemaparan Program Kerja","Diskusi & Tanya Jawab","Penutupan"],
        penutup: "Demikian undangan ini kami sampaikan. Besar harapan kami atas kehadiran seluruh anggota Karang Taruna demi kemajuan bersama.",
        ketua: "Edit Sini"
      });
      fillInputsFromState();
      updatePreview();
    }

    function getCurrentThemeVars(){
      const rs = getComputedStyle(document.documentElement);
      return {
        primary: rs.getPropertyValue("--primary").trim(),
        secondary: rs.getPropertyValue("--secondary").trim(),
        accent: rs.getPropertyValue("--accent").trim(),
        bg: rs.getPropertyValue("--bg").trim(),
        text: rs.getPropertyValue("--text").trim(),
        muted: rs.getPropertyValue("--muted").trim()
      };
    }

    function buildInvitationHTML(){
      const v = getCurrentThemeVars();
      const css = `
      :root{
        --primary:${v.primary};--secondary:${v.secondary};--accent:${v.accent};
        --bg:${v.bg};--text:${v.text};--muted:${v.muted};
      }
      body{margin:0;background:var(--bg);color:var(--text);font-family: ui-sans-serif, -apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;}
      .invite{max-width:840px;margin:24px auto;background:#fff;border-radius:20px;box-shadow:0 10px 30px rgba(16,24,40,0.12);overflow:hidden}
      .invite__header{padding:32px 26px;color:#fff;background:linear-gradient(135deg,var(--primary),var(--secondary));position:relative;isolation:isolate}
      .invite__header::after{content:"";position:absolute;inset:auto -30px -60px auto;width:220px;height:220px;background:radial-gradient(closest-side,rgba(255,255,255,0.25),transparent 70%);filter:blur(2px);border-radius:50%;z-index:-1}
      .invite__title{font-size:28px;margin:0 0 6px;letter-spacing:.3px;text-align: center;}
      .invite__subtitle{margin:0;opacity:.95;text-align: center;}
      .invite__body{padding:22px 26px 26px}
      .section{margin:14px 0 16px}
      .section h3{font-size:14px;margin:0 0 8px;color:var(--muted);letter-spacing:.3px;display:flex;align-items:center;gap:8px}
      .cardlet{background:#f7fbff;border:1px solid #e3edff;padding:14px;border-radius:14px}
      .cardlet--warm{background:#fff8f1;border-color:#ffe2c4}
      .kv{display:grid;grid-template-columns:120px 1fr;gap:8px;font-size:15px}
      .agenda-list{margin:6px 0 0;padding-left:18px}
      .footer-note{margin-top:16px;padding:12px 14px;border-left:4px solid var(--accent);background: color-mix(in srgb, var(--accent) 12%, #fff);border-radius:10px}
      .sign{text-align:right;margin-top:26px}
      .sign .name{margin-top:36px;font-style:italic;font-weight:600}
      `;
      const html = `
      <!DOCTYPE html>
      <html lang="id"><head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>${esc(state.judul || "Undangan Karang Taruna")}</title>
        <style>${css}</style>
      </head>
      <body>
        <div class="invite">
          <div class="invite__header">
            <h1 class="invite__title">${esc(state.judul || "")}</h1>
            <p class="invite__subtitle">${esc(state.subjudul || "")}</p>
          </div>
          <div class="invite__body">
            <div class="section">
              
              <div class="cardlet">${nl2br(state.sambutan || "")}</div>
            </div>
            <div class="section">
              <h3>ðŸ—“ Waktu & Tempat</h3>
              <div class="cardlet cardlet--warm">
                <div class="kv">
                  <div><strong>Hari/Tanggal</strong></div><div>${esc(state.hariTanggal || "")}</div>
                  <div><strong>Waktu</strong></div><div>${esc(state.waktu || "")}</div>
                  <div><strong>Tempat</strong></div><div>${esc(state.tempat || "")}</div>
                </div>
              </div>
            </div>
            <div class="section">
              <h3>ðŸ“‹ Agenda Acara</h3>
              <ul class="agenda-list">
                ${(state.agenda||[]).filter(Boolean).map(item=>`<li>${esc(item)}</li>`).join("")}
              </ul>
            </div>
            <div class="section">
              
              <div class="footer-note">${nl2br(state.penutup || "")}</div>
            </div>
            <div class="sign">
              <div>Hormat kami,</div>
              <div>Ketua Karang Taruna</div>
              <div class="name">${esc(state.ketua || "")}</div>
            </div>
          </div>
        </div>
      </body></html>`;
      return html.trim();
    }

    function downloadHTML(){
      const content = buildInvitationHTML();
      const blob = new Blob([content], {type: "text/html;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = (state.judul ? state.judul.toLowerCase().replace(/\s+/g,"_") : "undangan_karang_taruna") + ".html";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    // ---------- Events ----------
    bindField("#judul","judul");
    bindField("#subjudul","subjudul");
    bindField("#sambutan","sambutan");
    bindField("#hariTanggal","hariTanggal");
    bindField("#waktu","waktu");
    bindField("#tempat","tempat");
    bindField("#penutup","penutup");
    bindField("#ketua","ketua");

    $("#btnAddAgenda").addEventListener("click", ()=>{
      state.agenda.push("");
      renderAgendaEditor();
      updatePreview();
    });
    $("#btnDownload").addEventListener("click", downloadHTML);
    $("#btnDownload2").addEventListener("click", downloadHTML);
    $("#btnReset").addEventListener("click", resetToDefaults);
    $$(".swatch").forEach(btn=>{
      btn.addEventListener("click", ()=> applyTheme(btn.dataset.theme));
    });

    // ---------- Init ----------
    fillInputsFromState();
    updatePreview();
    applyTheme(state.theme);
  </script>
</body>
</html>
