<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Undangan Karang Taruna - Profesional</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style id="theme-style">
    :root {
      --primary: #1976d2;
      --primary-dark: #1565c0;
      --secondary: #d32f2f;
      --accent: #ff6f00;
      --bg-card: #ffffff;
      --bg-body: #f8f9fc;
      --text: #2c3e50;
      --border-radius: 16px;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --transition: all 0.25s ease;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-body);
      padding: 30px 20px;
      margin: 0;
      color: var(--text);
      line-height: 1.7;
    }

    .container {
      max-width: 820px;
      background: var(--bg-card);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 50px 60px;
      margin: 30px auto;
      position: relative;
      overflow: hidden;
      border: 1px solid #e0e0e0;
    }

    .header {
      text-align: center;
      margin-bottom: 24px;
    }

    h1 {
      font-size: 30px;
      font-weight: 700;
      color: var(--primary);
      margin: 0 0 8px 0;
      letter-spacing: -0.8px;
    }

    h2 {
      font-size: 20px;
      font-weight: 500;
      color: var(--secondary);
      margin: 0;
      font-style: italic;
    }

    .editable {
      padding: 10px 14px;
      border-radius: 8px;
      cursor: text;
      transition: var(--transition);
      position: relative;
      margin: 12px 0;
    }

    .editable:hover {
      background-color: #f5f8ff;
    }

    .editable:focus {
      outline: 3px solid rgba(25, 118, 210, 0.25);
      background-color: #edf3ff;
      z-index: 1;
    }

    p, ul, li {
      margin: 12px 0;
      font-weight: 400;
    }

    ul {
      padding-left: 22px;
    }

    li {
      line-height: 1.8;
    }

    hr {
      border: none;
      border-top: 1px solid #e0e0e0;
      margin: 40px 0;
      opacity: 0.8;
    }

    .signature {
      text-align: right;
      margin-top: 80px;
      font-size: 16px;
    }

    .signature strong {
      font-weight: 600;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      justify-content: center;
      margin: 30px auto;
      max-width: 900px;
    }

    button {
      padding: 14px 22px;
      font-size: 15px;
      font-weight: 500;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,0.12);
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.18);
    }

    #edit-mode {
      background: var(--accent);
      color: white;
    }

    #download-html {
      background: #2e7d32;
      color: white;
    }

    #download-png {
      background: var(--primary);
      color: white;
    }

    #theme-selector {
      padding: 14px;
      font-size: 15px;
      border-radius: 10px;
      border: 1px solid #ddd;
      background: white;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      min-width: 200px;
    }

    @media (max-width: 650px) {
      .container {
        padding: 30px 20px;
      }
      h1 { font-size: 26px; }
      h2 { font-size: 18px; }
      .controls { flex-direction: column; align-items: center; }
      #theme-selector { min-width: auto; }
    }
  </style>
</head>
<body>

  <!-- Tombol Kontrol -->
  <div class="controls">
    <button id="edit-mode">‚úèÔ∏è Edit Konten</button>
    <button id="download-html">üíæ Simpan sebagai HTML</button>
    <button id="download-png">üñºÔ∏è Ekspor sebagai PNG</button>
    <select id="theme-selector">
      <option value="blue-red">Biru-Merah (Default)</option>
      <option value="green-teal">Hijau-Toska</option>
      <option value="purple-amber">Ungu-Kuning Emas</option>
      <option value="indigo-pink">Indigo-Merah Muda</option>
    </select>
  </div>

  <!-- Kartu Undangan -->
  <div class="container" id="invitation">
    <div class="header">
      <h1 class="editable">UNDANGAN ACARA RUTIN KARANG TARUNA</h1>
      <h2 class="editable">"BERSATU, BERGERAK, BERKARYA"</h2>
    </div>

    <div class="editable">
      <p><strong>Halo, Sobat Karang Taruna!</strong></p>
      <p>Kami dengan penuh suka cita mengundang seluruh anggota untuk hadir dalam kumpulan rutin Karang Taruna. Mari satukan langkah, salurkan ide, dan wujudkan aksi nyata untuk kemajuan desa dan pemuda.</p>
    </div>

    <div class="editable">
      <p>üìÖ <strong>Hari/Tanggal</strong>: [Isi hari dan tanggal]</p>
      <p>‚è∞ <strong>Waktu</strong>: [Isi waktu, contoh: Pukul 15.00 WIB]</p>
      <p>üìç <strong>Tempat</strong>: [Nama tempat, contoh: Balai Desa Mekar Jaya]</p>
      <p>üó∫Ô∏è <strong>Alamat</strong>: [Isi alamat lengkap]</p>
    </div>

    <hr>

    <h3 class="editable">üéØ Agenda Kegiatan</h3>
    <div class="editable">
      <ul>
        <li>Pembukaan & sambutan</li>
        <li>Laporan kegiatan bulan lalu</li>
        <li>Diskusi rencana program kerja</li>
        <li>Evaluasi partisipasi anggota</li>
        <li>Tanya jawab & masukan dari anggota</li>
        <li>Penutup</li>
      </ul>
    </div>

    <div class="editable">
      <p>Terima kasih atas dedikasi dan semangatmu selama ini.<br>
      Kehadiranmu adalah langkah nyata dalam membangun Karang Taruna yang lebih aktif, solid, dan bermanfaat.</p>
      <p>Sampai jumpa di acara! üíôü§ç</p>
    </div>

    <div class="signature">
      <p class="editable"><strong>Hormat kami,</strong></p>
      <br><br>
      <p class="editable">
        Ketua Karang Taruna<br>
        [Nama Ketua]</strong>
      </p>
    </div>
  </div>

  <script>
    // Aktifkan mode edit
    document.getElementById("edit-mode").addEventListener("click", () => {
      const editable = document.querySelectorAll(".editable");
      const isEditable = editable[0].contentEditable === "true";

      editable.forEach(el => {
        el.contentEditable = !isEditable;
      });

      document.getElementById("edit-mode").textContent = 
        isEditable ? "‚úèÔ∏è Edit Konten" : "üõë Selesai Edit";
    });

    // Unduh sebagai HTML
    document.getElementById("download-html").addEventListener("click", () => {
      const container = document.getElementById("invitation").outerHTML;
      const currentStyle = document.getElementById("theme-style").innerHTML;
      const htmlContent = `<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Undangan Karang Taruna</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background: #f8f9fc; margin: 0; padding: 30px 20px; color: #2c3e50; }
    .container { max-width: 820px; background: white; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); padding: 50px 60px; margin: 30px auto; }
    ${currentStyle.replace(":root", "")}
  </style>
</head>
<body>
  <div class="container">
    ${container}
  </div>
</body>
</html>`;
      const blob = new Blob([htmlContent], { type: "text/html" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "undangan-karang-taruna-professional.html";
      a.click();
      URL.revokeObjectURL(url);
    });

    // Unduh sebagai PNG
    document.getElementById("download-png").addEventListener("click", () => {
      html2canvas(document.getElementById("invitation"), {
        scale: 2,
        useCORS: true,
        backgroundColor: "#ffffff",
        logging: false,
        scrollY: -window.scrollY,
        width: 820,
        height: document.getElementById("invitation").scrollHeight,
        windowHeight: document.getElementById("invitation").scrollHeight,
        allowTaint: true
      }).then(canvas => {
        const link = document.createElement("a");
        link.download = "undangan-karang-taruna.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      }).catch(err => {
        console.error("Error generating PNG:", err);
        alert("Gagal membuat gambar. Coba lagi.");
      });
    });

    // Ganti Tema
    document.getElementById("theme-selector").addEventListener("change", (e) => {
      const themes = {
        "blue-red": `
          :root { --primary: #1976d2; --secondary: #d32f2f; --accent: #ff6f00; }
        `,
        "green-teal": `
          :root { --primary: #2e7d32; --secondary: #00796b; --accent: #fb8c00; }
        `,
        "purple-amber": `
          :root { --primary: #7b1fa2; --secondary: #ff8f00; --accent: #c2185b; }
        `,
        "indigo-pink": `
          :root { --primary: #283593; --secondary: #c2185b; --accent: #f57c00; }
        `
      };
      document.getElementById("theme-style").innerHTML = themes[e.target.value] + `
        :root {
          --bg-card: #ffffff;
          --bg-body: #f8f9fc;
          --text: #2c3e50;
          --border-radius: 16px;
          --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
          --transition: all 0.25s ease;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg-body); padding: 30px 20px; margin: 0; color: var(--text); line-height: 1.7; }
        .container { max-width: 820px; background: var(--bg-card); border-radius: var(--border-radius); box-shadow: var(--shadow); padding: 50px 60px; margin: 30px auto; }
        h1 { color: var(--primary); }
        h2 { color: var(--secondary); }
        .editable:hover { background-color: #f5f8ff; }
        .editable:focus { outline: 3px solid rgba(25, 118, 210, 0.25); background-color: #edf3ff; }
        #edit-mode { background: var(--accent); color: white; }
        #download-html { background: #2e7d32; color: white; }
        #download-png { background: var(--primary); color: white; }
        button:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(0,0,0,0.18); }
        #theme-selector { padding: 14px; font-size: 15px; border-radius: 10px; border: 1px solid #ddd; background: white; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
        @media (max-width: 650px) { .container { padding: 30px 20px; } }
      `;
    });

    // Inisialisasi tema default
    document.getElementById("theme-selector").dispatchEvent(new Event("change"));
  </script>
</body>
</html>
